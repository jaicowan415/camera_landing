<!doctype html>
<html>
    <head>
        <title>Webcam Test</title>
        <link rel="stylesheet" type="text/css" href="./main.css">
    </head>
    <body>

        <script src="./webcam_test.js"></script>

        <h1>Camera Sharing Support</h1>
        <select id="camera-select" name="camera-select"></select>

        <br/>

        <video id="webcam-output"></video>

        <br/>

        <div class="note">This page does not store or transmit any data. It merely shows you the output of your camera or webcam.</div>

        <br/>

    </body>
</html>


<html>

  <body>
    <div>CODE: <code id="digits"></code></div>
    <button id="get-code">Get Code</button>

    <script>
      var ujet = new UJET({
        companyId: "SFCO",
        host: "https://zdco.api.ujet.co",
        cobrowseOptions: {
          license: '0Blc4UGxQHHDNA',
          trustedOrigins: ["https://sfco.ujetdemo.co/"],
        }
      });

      document.querySelector('#get-code').addEventListener('click', function() {
        ujet.createCobrowseCode().then(function (code) {
          document.querySelector('#digits').textContent = code;
        });
      });

      ujet.on('created', function () {
        ujet.authenticate(getAuthToken);
      });

      function getAuthToken() {
        // YOU SHOULD HAVE THIS KIND OF API ON YOUR SERVER
        return fetch('/auth/token', {
          headers: {
            'Content-Type': 'application/json'
          },
          method: "POST",
          body: JSON.stringify({
            payload: {
              identifier: 'test@email.com',
              name: 'Test user',
              email: 'test@user.com',
              phone: '1800UJETSDK'
            }
          })
        }).then(function(resp) {
          return resp.json();
        });
      }
    </script>
  </body>
</html>
